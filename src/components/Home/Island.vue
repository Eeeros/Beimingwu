<script setup>
import { ref, onMounted, nextTick, onBeforeUnmount } from 'vue'

let observer
const active = ref(false)
const reference = ref(null)

onMounted(() => {
  nextTick(() => {
    observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.intersectionRatio > 0.6) {
          active.value = true
        }
        if (entry.intersectionRatio < 0.1) {
          active.value = false
        }
      })
    }, {
      root: null,
      rootMargin: '0px',
      threshold: [0.1, 0.6]
    })
    observer.observe(reference.value)
  })
})

onBeforeUnmount(() => {
  observer.disconnect()
})
</script>

<template>
  <div ref="reference" class="grid md:grid-cols-2 md:pb-30 <md:pb-20 mx-auto max-w-1200px w-1/1">
    <div class="flex flex-col justify-center <md:px-5 md:pl-10">
      <div class="xl:(text-5xl my-10) lg:(text-4xl my-7) md:(text-3xl my-5) <md:(text-4xl my-5)">
        Specification world
      </div>
      <p class="text-gray-500">
        Note that once the user model on multi-modal data is submitted to the learnware market, the two specification
        islands that correspond to video-only and text-only models, respectively, will merge.
      </p>
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
      <g class="hand" :class="{ active }" id="hand1">
        <path fill="#00A0C8"
          d="M16,20v12h4c0,2.21,1.79,4,4,4s4-1.79,4-4h4v-4c-2.21,0-4-1.79-4-4c0-2.21,1.79-4,4-4v-4H20 C17.791,16,16,17.791,16,20z" />
        <path fill="#0082AA" d="M16,27v-3h8.5c0.828,0,1.5,0.672,1.5,1.5v0c0,0.828-0.672,1.5-1.5,1.5H16z" />
        <path fill="#F0C8A0"
          d="M24.5,23H16c0.828,0,1.5-0.672,1.5-1.5S16.828,20,16,20c0.828,0,1.5-0.672,1.5-1.5S16.828,17,16,17 c0.828,0,1.5-0.672,1.5-1.5S16.828,14,16,14H8c-0.74,0-1.386,0.402-1.732,1H4v10h2.126c0.444,1.725,2.01,3,3.874,3h2 c1.105,0,2-0.895,2-2h10.5c0.828,0,1.5-0.672,1.5-1.5S25.328,23,24.5,23z" />
        <path fill="#D2AA82"
          d="M12,27H9.874c-1.48,0-2.772-0.805-3.464-2H6.126c0.444,1.725,2.01,3,3.874,3h2c1.105,0,2-0.895,2-2v-1 C14,26.105,13.105,27,12,27z" />
        <path fill="#D2AA82"
          d="M16,22h-1v1h1c0.828,0,1.5-0.672,1.5-1.5c0-0.175-0.03-0.344-0.086-0.5 C17.208,21.583,16.653,22,16,22z" />
        <path fill="#D2AA82"
          d="M16,19h-1v1h1c0.828,0,1.5-0.672,1.5-1.5c0-0.175-0.03-0.344-0.086-0.5 C17.208,18.583,16.653,19,16,19z" />
        <path fill="#D2AA82"
          d="M16,16h-1v1h1c0.828,0,1.5-0.672,1.5-1.5c0-0.175-0.03-0.344-0.086-0.5 C17.208,15.583,16.653,16,16,16z" />
        <g>
          <path fill="#D2AA82"
            d="M24.5,25H10v1h14.5c0.828,0,1.5-0.672,1.5-1.5c0-0.175-0.03-0.344-0.086-0.5 C25.708,24.583,25.153,25,24.5,25z" />
        </g>
      </g>
      <g class="hand" :class="{ active }" id="hand2">
        <path fill="#C80A50"
          d="M28,24c0,2.21,1.79,4,4,4v4h4c0-2.21,1.79-4,4-4s4,1.79,4,4h4V20c0-2.209-1.791-4-4-4H32v4 C29.79,20,28,21.79,28,24z" />
        <path fill="#A00028"
          d="M29,24c0-2.21,1.79-4,4-4v-4h-1v4c-2.21,0-4,1.79-4,4c0,2.21,1.79,4,4,4v4h1v-4 C30.79,28,29,26.21,29,24z" />
        <path fill="#A00028" d="M37,16h3v8.5c0,0.828-0.672,1.5-1.5,1.5l0,0c-0.828,0-1.5-0.672-1.5-1.5V16z" />
        <path fill="#F0C8A0"
          d="M49,6.268V4H39v2.126C37.275,6.57,36,8.136,36,10v2c0,1.105,0.895,2,2,2v10.5c0,0.828,0.672,1.5,1.5,1.5 s1.5-0.672,1.5-1.5V16c0,0.828,0.672,1.5,1.5,1.5S44,16.828,44,16c0,0.828,0.672,1.5,1.5,1.5S47,16.828,47,16 c0,0.828,0.672,1.5,1.5,1.5S50,16.828,50,16V8C50,7.26,49.598,6.614,49,6.268z" />
        <path fill="#D2AA82"
          d="M37,12V9.874c0-1.48,0.805-2.772,2-3.464V6.126C37.275,6.57,36,8.136,36,10v2c0,1.105,0.895,2,2,2h1 C37.895,14,37,13.105,37,12z" />
        <path fill="#D2AA82"
          d="M42,16v-1h-1v1c0,0.828,0.672,1.5,1.5,1.5c0.175,0,0.344-0.03,0.5-0.086 C42.417,17.208,42,16.653,42,16z" />
        <path fill="#D2AA82"
          d="M45,16v-1h-1v1c0,0.828,0.672,1.5,1.5,1.5c0.175,0,0.344-0.03,0.5-0.086 C45.417,17.208,45,16.653,45,16z" />
        <path fill="#D2AA82"
          d="M48,16v-1h-1v1c0,0.828,0.672,1.5,1.5,1.5c0.175,0,0.344-0.03,0.5-0.086 C48.417,17.208,48,16.653,48,16z" />
        <g>
          <path fill="#D2AA82"
            d="M39,24.5V10h-1v14.5c0,0.828,0.672,1.5,1.5,1.5c0.175,0,0.344-0.03,0.5-0.086 C39.417,25.708,39,25.153,39,24.5z" />
        </g>
      </g>
      <g class="hand" :class="{ active }" id="hand3">
        <path fill="#FAB400"
          d="M16,32v12c0,2.209,1.791,4,4,4h12v-4c2.21,0,4-1.79,4-4c0-2.21-1.79-4-4-4v-4h-4c0,2.21-1.79,4-4,4 s-4-1.79-4-4H16z" />
        <path fill="#DC9600"
          d="M24,37c2.21,0,4-1.79,4-4h4v-1h-4c0,2.21-1.79,4-4,4s-4-1.79-4-4h-4v1h4C20,35.21,21.79,37,24,37z" />
        <path fill="#DC9600" d="M27,48h-3v-8.5c0-0.828,0.672-1.5,1.5-1.5h0c0.828,0,1.5,0.672,1.5,1.5V48z" />

        <path fill="#F0C8A0"
          d="M26,50V39.5c0-0.828-0.672-1.5-1.5-1.5S23,38.672,23,39.5V48c0-0.828-0.672-1.5-1.5-1.5S20,47.172,20,48 c0-0.828-0.672-1.5-1.5-1.5S17,47.172,17,48c0-0.828-0.672-1.5-1.5-1.5S14,47.172,14,48v8c0,0.74,0.402,1.386,1,1.732V60h10 v-2.126c1.725-0.444,3-2.01,3-3.874v-2C28,50.895,27.105,50,26,50z" />
        <path fill="#D2AA82"
          d="M26,50h-1c1.105,0,2,0.895,2,2v2.126c0,1.48-0.805,2.772-2,3.464v0.284c1.725-0.444,3-2.01,3-3.874v-2 C28,50.895,27.105,50,26,50z" />
        <path fill="#D2AA82"
          d="M22,48v1h1v-1c0-0.828-0.672-1.5-1.5-1.5c-0.175,0-0.344,0.03-0.5,0.086 C21.583,46.792,22,47.347,22,48z" />
        <path fill="#D2AA82"
          d="M19,48v1h1v-1c0-0.828-0.672-1.5-1.5-1.5c-0.175,0-0.344,0.03-0.5,0.086 C18.583,46.792,19,47.347,19,48z" />
        <path fill="#D2AA82"
          d="M16,48v1h1v-1c0-0.828-0.672-1.5-1.5-1.5c-0.175,0-0.344,0.03-0.5,0.086 C15.583,46.792,16,47.347,16,48z" />
        <path fill="#D2AA82"
          d="M25,39.5V54h1V39.5c0-0.828-0.672-1.5-1.5-1.5c-0.175,0-0.344,0.03-0.5,0.086 C24.583,38.292,25,38.847,25,39.5z" />
      </g>
      <g class="hand" :class="{ active }" id="hand4">
        <path fill="#0A5078"
          d="M36,40c0,2.21-1.79,4-4,4v4h12c2.209,0,4-1.791,4-4V32h-4c0-2.21-1.79-4-4-4s-4,1.79-4,4h-4v4 C34.21,36,36,37.79,36,40z" />
        <path fill="#00325A"
          d="M37,40c0-2.21-1.79-4-4-4v-4h-1v4c2.21,0,4,1.79,4,4c0,2.21-1.79,4-4,4v4h1v-4 C35.21,44,37,42.21,37,40z" />
        <path fill="#00325A"
          d="M40,28c-2.21,0-4,1.79-4,4h-4v1h4c0-2.21,1.79-4,4-4s4,1.79,4,4h4v-1h-4C44,29.79,42.21,28,40,28z" />
        <path fill="#00325A" d="M48,37v3h-8.5c-0.828,0-1.5-0.672-1.5-1.5l0,0c0-0.828,0.672-1.5,1.5-1.5H48z" />
        <path fill="#F0C8A0"
          d="M60,39h-2.126c-0.444-1.725-2.01-3-3.874-3h-2c-1.105,0-2,0.895-2,2H39.5c-0.828,0-1.5,0.672-1.5,1.5 s0.672,1.5,1.5,1.5H48c-0.828,0-1.5,0.672-1.5,1.5S47.172,44,48,44c-0.828,0-1.5,0.672-1.5,1.5S47.172,47,48,47 c-0.828,0-1.5,0.672-1.5,1.5S47.172,50,48,50h8c0.74,0,1.386-0.402,1.732-1H60V39z" />
        <path fill="#D2AA82"
          d="M57.59,39h0.284c-0.444-1.725-2.01-3-3.874-3h-2c-1.105,0-2,0.895-2,2v1c0-1.105,0.895-2,2-2h2.126 C55.606,37,56.898,37.805,57.59,39z" />
        <path fill="#D2AA82"
          d="M48,42h1v-1h-1c-0.828,0-1.5,0.672-1.5,1.5c0,0.175,0.03,0.344,0.086,0.5 C46.792,42.417,47.347,42,48,42z" />
        <path fill="#D2AA82"
          d="M48,45h1v-1h-1c-0.828,0-1.5,0.672-1.5,1.5c0,0.175,0.03,0.344,0.086,0.5 C46.792,45.417,47.347,45,48,45z" />
        <path fill="#D2AA82"
          d="M48,48h1v-1h-1c-0.828,0-1.5,0.672-1.5,1.5c0,0.175,0.03,0.344,0.086,0.5 C46.792,48.417,47.347,48,48,48z" />
        <path fill="#D2AA82"
          d="M39.5,39H54v-1H39.5c-0.828,0-1.5,0.672-1.5,1.5c0,0.175,0.03,0.344,0.086,0.5 C38.292,39.417,38.847,39,39.5,39z" />
      </g>
    </svg>
  </div>
</template>

<style scoped lang="scss">
.hand {
  transition: transform 500ms ease-in-out;
}
#hand1 {
  transform: translate(-4px, -4px);
}

#hand2 {
  transform: translate(4px, -4px);
}

#hand3 {
  transform: translate(-4px, 4px);
}

#hand4 {
  transform: translate(4px, 4px);
}

.hand.active {
  transform: translate(0, 0) !important;
}
</style>